{
  "spec_name": "Cal Viewer",
  "created": "2026-01-17",
  "status": "ready",
  "phases": [
    {
      "id": "phase-1",
      "name": "Foundation",
      "prerequisite": null,
      "stories": ["US-1", "US-2"]
    },
    {
      "id": "phase-2",
      "name": "UI Core",
      "prerequisite": "phase-1",
      "stories": ["US-3", "US-4", "US-5"]
    },
    {
      "id": "phase-3",
      "name": "Polish",
      "prerequisite": "phase-2",
      "stories": ["US-6", "US-7", "US-8"]
    },
    {
      "id": "phase-4",
      "name": "Integration",
      "prerequisite": "phase-3",
      "stories": ["US-9"]
    }
  ],
  "user_stories": [
    {
      "id": "US-1",
      "title": "API Tree Endpoint",
      "phase": "phase-1",
      "acceptance_criteria": [
        "GET /api/tree returns JSON structure: {name, type, children}",
        "Includes all .md files and subdirectories",
        "Response time < 100ms"
      ]
    },
    {
      "id": "US-2",
      "title": "WebSocket File Change Events",
      "phase": "phase-1",
      "acceptance_criteria": [
        "Server watches cal/ folder using chokidar",
        "File add/change/delete emits WebSocket event",
        "Event includes file path and change type",
        "Latency from file save to event < 500ms"
      ]
    },
    {
      "id": "US-3",
      "title": "Sidebar Tree Rendering",
      "phase": "phase-2",
      "acceptance_criteria": [
        "Left sidebar shows expandable folder tree",
        "Folders are expandable/collapsible",
        "Files show appropriate icons",
        "Current selection highlighted"
      ]
    },
    {
      "id": "US-4",
      "title": "Markdown Content Rendering",
      "phase": "phase-2",
      "acceptance_criteria": [
        "Click file in tree â†’ content appears in main pane",
        "Markdown rendered as HTML",
        "Content pane scrollable independently",
        "File path shown in header"
      ]
    },
    {
      "id": "US-5",
      "title": "Meeting Participant Tabs",
      "phase": "phase-2",
      "acceptance_criteria": [
        "Meeting folders show tabs for participant files",
        "Tab labels extracted from filename",
        "Clicking tab switches content",
        "Active tab visually distinguished"
      ]
    },
    {
      "id": "US-6",
      "title": "Apple-Inspired Styling",
      "phase": "phase-3",
      "acceptance_criteria": [
        "System font stack",
        "Generous whitespace (24px+ margins)",
        "Sidebar with subtle gray background",
        "Content max-width 720px",
        "Responsive for 1280px+ screens"
      ]
    },
    {
      "id": "US-7",
      "title": "Syntax Highlighting",
      "phase": "phase-3",
      "acceptance_criteria": [
        "Code blocks highlighted by language",
        "Uses highlight.js or Prism",
        "Works with light background"
      ]
    },
    {
      "id": "US-8",
      "title": "Search with Filter and Highlight",
      "phase": "phase-3",
      "acceptance_criteria": [
        "Search input in header",
        "Filters tree to matching files",
        "Highlights search term in content",
        "Case-insensitive",
        "Debounced 300ms"
      ]
    },
    {
      "id": "US-9",
      "title": "/cal:viewer Command",
      "phase": "phase-4",
      "acceptance_criteria": [
        "Command defined in commands/viewer.md",
        "Runs npm start in cal/viewer/",
        "Auto-opens browser to localhost:3000",
        "Prints startup message"
      ]
    }
  ],
  "out_of_scope": [
    "Persist last viewed file",
    "Dark mode",
    "Export to PDF",
    "Bidirectional chat"
  ]
}
